<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:tx="http://www.springframework.org/schema/tx" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="
	        http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/tx 
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd
           http://www.springframework.org/schema/aop 
           http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">  
           
   <!--生成股票对比图定时任务   每天定时执行  start-->
    <bean id="StockGenerationJobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
       <property name="targetObject" ref="generationThreadManager" />
       <property name="targetMethod" value="generateStock" />
       <property name="concurrent" value="false" />
    </bean>
    
    <bean id="StockGenerationTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
      <property name="jobDetail">
        <ref bean="StockGenerationJobDetail"/>
      </property>
      <property name="cronExpression">

        <value>0 27 18 * * ?</value> 

      </property>
    </bean>
    <!-- end -->

    
    <!-- 每小时载入股票基础信息  start-->
    <bean id="LoadStkBasicinfoJobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
       <property name="targetObject" ref="stockCache" />
       <property name="targetMethod" value="setStockList" />
       <property name="concurrent" value="false" />
    </bean>
    
    <bean id="LoadStkBasicinfoTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerBean">
       <property name="jobDetail" ref="LoadStkBasicinfoJobDetail" />
       <property name="startDelay" value="2000" />
       <property name="repeatInterval" value="3600000" />
    </bean>
    <!-- end -->
    
    <!-- 每小时载入基金基础信息  start-->
    <bean id="LoadFndBasicinfoJobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
       <property name="targetObject" ref="fundCache" />
       <property name="targetMethod" value="setFundList" />
       <property name="concurrent" value="false" />
    </bean>
    
    <bean id="LoadFndBasicinfoTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerBean">
       <property name="jobDetail" ref="LoadFndBasicinfoJobDetail" />
       <property name="startDelay" value="5000" />
       <property name="repeatInterval" value="3600000" />
    </bean>
    <!-- end -->
    
    <bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="triggers">
            <list> 
            <!-- 
            <ref bean="LoadStkBasicinfoTrigger" />
            <ref bean="LoadFndBasicinfoTrigger" />
            <ref bean="StockGenerationTrigger" />
            -->
            </list>

        </property>
    </bean>
 
</beans>